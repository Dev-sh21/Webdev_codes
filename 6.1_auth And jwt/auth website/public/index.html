<html>
  <head>
    <title>auth website</title>
  </head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js"></script>
                                           
  
  
  
  <script>
  async function signup() {
    const username = document.getElementById("signup-username").value;
    const password = document.getElementById("signup-password").value;

    await axios.post("http://localhost:3000/signup", {
      username: username,
      password: password
    });

    alert("you are signed up");
  }

  async function signin() {
    const username = document.getElementById("signin-username").value;
    const password = document.getElementById("signin-password").value;

    const response = await axios.post("http://localhost:3000/signin", {
      username: username,
      password: password
    });

    localStorage.setItem("token", response.data.token);
    alert("you are signed in");

    // âœ… Call user info only after successful signin
    getUserInformation();
  }

  async function getUserInformation() {
    const response = await axios.get("http://localhost:3000/me", {
      headers: {
        token: localStorage.getItem("token")
      }
    });

    document.getElementById("Information").innerHTML =
      "Username: " + response.data.username + "<br>Password: " + response.data.password;
  }

  function logout() {
    localStorage.removeItem("token");
    alert("Logged out");
    document.getElementById("Information").innerHTML = ""; // Clear info when logged out
  }
</script>


  <body>

    <div>
      signup
      <input id="signup-username" type="text" name="username" placeholder="username">
      <input id="signup-password" type="text" name="password" placeholder="password">
      <button onclick="signup()">submit</button>
    </div>

     <div>
      signin
      <input id ="signin-username" type="text" name="username" placeholder="username">
      <input id="signin-password" type="text" name="password" placeholder="password">
      <button onclick="signin()">submit</button>
    </div>

    <div>
      User Information
      <div id="Information"></div>
    </div>

    <div>
      <button onclick="logout()">logout</button>
    </div>

  </body>
</html>